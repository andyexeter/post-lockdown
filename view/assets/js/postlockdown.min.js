!function(t,e){"use strict";function i(e,i){this.$el=t(e),this.options=t.extend({},i),this.$search=this.options.inputSearch,this.$left=this.options.ulAvailable,this.$right=this.options.ulSelected,this.$spinner=this.options.spinner,this.doingAjax=!1,this.init()}var s="plmultiselect";i.prototype={init:function(){var e=this;this.$right.height(this.$left.parent().height()),this.$search.autocomplete({minLength:0,source:function(t){e.queryItems(t.term,0,function(t){e.renderMenu(e.$left,t.data)})},create:function(){t(this).autocomplete("search")}}),this.$left.on("click","> li",function(){t(this).is(".selected")||e.selectItem.call(e,t(this))}),this.$right.on("click","> li .dashicons-no",function(){var i=t(this).closest("li").data("ID");t(this).closest("li").remove(),e.$left.find(".post-"+i).removeClass("selected")}),this.options.selected.length&&this.selectItem(this.options.selected),this.$left.on("scroll",function(){this.scrollHeight-t(this).scrollTop()-15<=t(this).height()&&e.nextPage()})},nextPage:function(){var t=this,e=this.options.inputSearch.val(),i=this.$left.children("li").length;this.queryItems(e,i,function(e){t.renderMenu(t.$left,e.data,"",!0)})},queryItems:function(i,s,n){return this.doingAjax?!1:(this.doingAjax=!0,this.$spinner.addClass("is-active"),void t.ajax({url:e.ajaxurl,type:"GET",data:{action:this.options.ajaxAction,term:i,offset:s},context:this,success:function(e){t.isFunction(n)&&n.call(this,e)},complete:function(){this.doingAjax=!1,this.$spinner.removeClass("is-active")}}))},selectItem:function(e){var i=this.options.inputName;t.isArray(e)?this.renderMenu(this.$right,e,i,!0):(i+="["+e.data("ID")+"]",e.clone(!1).data("ID",e.data("ID")).appendTo(this.$right).find("input.post-id").attr("name",i),e.addClass("selected"))},renderMenu:function(e,i,s,n){var l=this,a=[];n||e.empty(),t.each(i,function(t,e){a.push(l.getItemTpl(e,s+"["+e.ID+"]"))}),e.append(a)},getItemTpl:function(e,i){i||(i="");var s=t("<li />").addClass("post-"+e.ID).data("ID",e.ID).append('<span class="post-title">'+e.post_title+'</span><span class="dashicons dashicons-no" title="Remove"></span><span class="post-type">'+e.post_type+'</span><input type="hidden" class="post-id" name="'+i+'" value="'+e.ID+'" />');return this.$right.find(".post-"+e.ID).length&&s.addClass("selected"),s}},t.fn[s]=function(e){return this.each(function(){var n=t(this).data(s+".plugin");n||(n=new i(this,e),t(this).data(s+".plugin",n))})}}(jQuery,window),function(t){"use strict";t(function(){t(".pl-posts-container").each(function(){var e=t(this).find(".pl-posts-selected .pl-multiselect").data("key"),i=t(this).find(".pl-posts-selected .pl-multiselect").data("input_name");t(this).plmultiselect({ajaxAction:"pl_autocomplete",inputName:i,inputSearch:t(this).find(".pl-autocomplete"),ulAvailable:t(this).find(".pl-posts-available .pl-multiselect"),ulSelected:t(this).find(".pl-posts-selected .pl-multiselect"),selected:window.postlockdown[e]||[],spinner:t(this).find(".spinner")})})})}(jQuery);
//# sourceMappingURL=postlockdown.min.js.map
